/**
 * skylark-mousetrap - A version of mousetrap.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-mousetrap/
 * @license MIT
 */
!function(e,t){var n=t.define,require=t.require,r="function"==typeof n&&n.amd,o=!r&&"undefined"!=typeof exports;if(!r&&!n){var i={};n=t.define=function(e,t,n){"function"==typeof n?(i[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),r=e.split("/");n.pop();for(var o=0;o<r.length;o++)"."!=r[o]&&(".."==r[o]?n.pop():n.push(r[o]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):i[e]={factory:null,resolved:!0,exports:n}},require=t.require=function(e){if(!i.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=i[e];if(!module.resolved){var n=[];module.deps.forEach(function(e){n.push(require(e))}),module.exports=module.factory.apply(t,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-mousetrap/Mousetrap",["skylark-langx/skylark"],function(e){for(var t,n={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},r={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},i={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},a=1;a<20;++a)n[111+a]="f"+a;for(a=0;a<=9;++a)n[a+96]=a.toString();function s(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function u(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return n[e.which]?n[e.which]:r[e.which]?r[e.which]:String.fromCharCode(e.which).toLowerCase()}function c(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function l(e,r,o){return o||(o=function(){if(!t)for(var e in t={},n)e>95&&e<112||n.hasOwnProperty(e)&&(t[n[e]]=e);return t}()[e]?"keydown":"keypress"),"keypress"==o&&r.length&&(o="keydown"),o}function f(e,t){var n,r,a,s=[];for(n=function(e){if("+"===e)return["+"];return(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),a=0;a<n.length;++a)r=n[a],i[r]&&(r=i[r]),t&&"keypress"!=t&&o[r]&&(r=o[r],s.push("shift")),c(r)&&s.push(r);return t=l(r,s,t),{key:r,modifiers:s,action:t}}function p(e){var t=this;if(e=e||document,!(t instanceof p))return new p(e);t.target=e,t._callbacks={},t._directMap={};var n,r={},o=!1,i=!1,a=!1;function l(e){e=e||{};var t,n=!1;for(t in r)e[t]?n=!0:r[t]=0;n||(a=!1)}function h(e,n,o,i,a,s){var u,l,f,p,h=[],y=o.type;if(!t._callbacks[e])return[];for("keyup"==y&&c(e)&&(n=[e]),u=0;u<t._callbacks[e].length;++u)if(l=t._callbacks[e][u],(i||!l.seq||r[l.seq]==l.level)&&y==l.action&&("keypress"==y&&!o.metaKey&&!o.ctrlKey||(f=n,p=l.modifiers,f.sort().join(",")===p.sort().join(",")))){var d=!i&&l.combo==a,k=i&&l.seq==i&&l.level==s;(d||k)&&t._callbacks[e].splice(u,1),h.push(l)}return h}function y(e,n,r,o){t.stopCallback(n,n.target||n.srcElement,r,o)||!1===e(n,r)&&(function(e){if(e.preventDefault)return void e.preventDefault();e.returnValue=!1}(n),function(e){if(e.stopPropagation)return void e.stopPropagation();e.cancelBubble=!0}(n))}function d(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=u(e);n&&("keyup"!=e.type||o!==n?t.handleKey(n,function(e){var t=[];e.shiftKey&&t.push("shift");e.altKey&&t.push("alt");e.ctrlKey&&t.push("ctrl");e.metaKey&&t.push("meta");return t}(e),e):o=!1)}function k(e,t,i,s){function c(t){return function(){a=t,++r[e],clearTimeout(n),n=setTimeout(l,1e3)}}function p(t){y(i,t,e),"keyup"!==s&&(o=u(t)),setTimeout(l,10)}r[e]=0;for(var h=0;h<t.length;++h){var d=h+1===t.length,k=d?p:c(s||f(t[h+1]).action);m(t[h],k,s,e,h)}}function m(e,n,r,o,i){t._directMap[e+":"+r]=n;var a,s=(e=e.replace(/\s+/g," ")).split(" ");s.length>1?k(e,s,n,r):(a=f(e,r),t._callbacks[a.key]=t._callbacks[a.key]||[],h(a.key,a.modifiers,{type:a.action},o,e,i),t._callbacks[a.key][o?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:o,level:i,combo:e}))}t._handleKey=function(e,t,n){var r,o=h(e,t,n),s={},u=0,f=!1;for(r=0;r<o.length;++r)o[r].seq&&(u=Math.max(u,o[r].level));for(r=0;r<o.length;++r)if(o[r].seq){if(o[r].level!=u)continue;f=!0,s[o[r].seq]=1,y(o[r].callback,n,o[r].combo,o[r].seq)}else f||y(o[r].callback,n,o[r].combo);var p="keypress"==n.type&&i;n.type!=a||c(e)||p||l(s),i=f&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)m(e[r],t,n)},s(e,"keypress",d),s(e,"keydown",d),s(e,"keyup",d)}return p.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},p.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},p.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},p.prototype.reset=function(){return this._callbacks={},this._directMap={},this},p.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(function e(t,n){if(null===t||t===document)return!1;if(t===n)return!0;return e(t.parentNode,n)}(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},p.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},p.addKeycodes=function(e){for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);t=null},p.init=function(){var e=p(document);for(var t in e)"_"!==t.charAt(0)&&(p[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},e.attach("intg.Mousetrap",p)}),e("skylark-mousetrap/main",["./Mousetrap"],function(e){return e.init(),e}),e("skylark-mousetrap",["skylark-mousetrap/main"],function(e){return e})}(n),!r){var a=require("skylark-langx/skylark");o?module.exports=a:t.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-mousetrap.js.map
